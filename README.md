# 1. Тема и целевая аудитория
## AliExpress
### MVP
- Авторизация
- Поиск товаров
- Каталог товаров по категориям
- Корзина
- Оформление заказа
- Избранные товары
- Отзывы пользователей
### ЦА
Согласно [1], рейтинг стран по количеству посетителей:
1. Бразилия, 9.62%
2. Испания, 8.02%
3. Россия, 8.01%
4. США, 7.89%
5. Франция, 6.16%
6. Другие страны, 60.32%
# 2. Расчет нагрузки
Среднее количество посетителей в месяц [[1]](https://www.similarweb.com/ru/website/aliexpress.com/#traffic) - 450 млн.

Количество переходов по странице входа в месяц [[2]](https://www.similarweb.com/ru/website/login.aliexpress.com/#overview) - 61 млн.

Количество поисковых запросов в месяц [[3]](https://www.akm.ru/eng/press/the-monthly-audience-of-aliexpress-russia-has-reached-35-million-people/) - 110+ млн 

AliExpress разлогинивает пользователей при неактивности. Будем считать, что каждый раз, когда пользователь хочет сделать заказ, ему приходится логиниться. При добавлении товара в избранное также необходимо залогиниться. Пусть избранным пользуются 30% посетителей сервиса. 

## Примерный подсчет количества действий
 Тип запроса                | Количество (млн. в день) 
 -------------------------- | ------------------------ 
 Авторизация                | 2.6
 Поиск товара               | 3.7
 Просмотр каталога товаров  | 0.7
 Добавление в избранное     | 1.2
 Просмотр корзины           | 2.2
 Оформление заказа          | 1.5
 Отзывы пользователей       | 0.4

## Технические метрики

Количество товаров на AliExpress - 100 млн. (на 2020 год) [[4]](https://expandedramblings.com/index.php/aliexpress-statistics-facts/)

Пусть каждый товар в среднем имеет по 5 фотографий и 1 видеоролик. Размер каждой фотографии - 100 КБ (WebP), размер одного видеоролика - 10 МБ (~1 минута, AVC, 1.3 Мбит/c, 720p, звук AAC 128 кбит/c стерео)

У каждого товара есть описание, которое часто сопровождается дополнительными картинками - 20 шт. по 50 КБ (WebP)

Тогда объем хранилища товаров - `(5 * 0.1) + 10 + (20 * 0.05) * (100 * 10^6) = 100000010.5 МБ = 97656 ГБ = 95 ТБ`

Среднее количество фотографий, прикрепленных к отзыву - 5 штук. Каждая по 50 КБ, WebP

Пусть 30% пользователей оставляют подробные отзывы с фотографиями, тогда объем хранилища под отзывы `(100 * 10^6 * 0.3) * (5 * 0.05) = 7500000 МБ = 7324 ГБ = 7.15 ТБ`

Пиковое потребление - удвоенное обычное потребление

## Входящий трафик

Тип запроса    | Объем 1 запроса (КБ) | Суточный объем (ГБ/Сутки) | Пиковое потребление в сутки (Гбит/с)
------------   |----------------------|---------------------------|-------------------------------------
Авторизация    | 1.2                  | 2.9                       | 
Поиск          | 1                    | 3.7                       | 
Отправка отзыва| 300                  | 114                       |

## Исходящий трафик
Тип запроса | Объем 1 запроса (КБ) | Суточный объем (ГБ/Сутки) | Пиковое потребление в сутки (Гбит/с)
------------|----------------------|---------------------------|-------------------------------------
Поиск       | 20000                | 72265                     | 

## RPS по типам запросов
86400

Тип запроса            | RPS
------------           | ---
Авторизация            | 30
Поиск                  | 43
Отправка отзыва        | 5
Добавление в избранное | 14
Просмотр корзины       | 26
Оформление заказа      | 18


### Источники
1. [Similarweb - AliExpress](https://www.similarweb.com/ru/website/aliexpress.com/#traffic)
2. [Similarweb - AliExpress login](https://www.similarweb.com/ru/website/login.aliexpress.com/#overview)
3. [The monthly audience of AliExpress Russia has reached 35 million people](https://www.akm.ru/eng/press/the-monthly-audience-of-aliexpress-russia-has-reached-35-million-people/)
4. [AliExpress statistics and facts](https://expandedramblings.com/index.php/aliexpress-statistics-facts/)